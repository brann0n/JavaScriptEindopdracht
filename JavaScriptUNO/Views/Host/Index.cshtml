@model JavaScriptUNO.Models.ServerGameSession
@{
    ViewBag.Title = Model.GameName;
}

<h2>@Model.GameName</h2>

<div class="game-controller">
    <button id="btnStartGame" class="btn btn-default" onclick="startGameOnClick()">Start</button>
    <button id="btnDealCards" class="btn btn-default disabled" onclick="dealCards()">Deal cards</button>
    <button id="btnReset" class="btn btn-default disabled">Reset</button>
</div>

<div class="gameBackground">
    <div class="game-info">
        <p id="numberOfCards" class="card-info">
            Once all players are connected please click start game
        </p>
        <p id="playerInfo" class="player-info">
            Awaiting players...
        </p>
    </div>
    <div class="cardStock Deck"></div>
    <div class="cardPlaying Deck"></div>
</div>

<script src="~/Scripts/jquery.signalR-2.4.1.min.js"></script>
<script src="~/signalr/hubs"></script>
<script src="~/UnoScripts/UnoHosts.js"></script>
<script src="~/UnoScripts/Uno.js"></script>
<script type="text/javascript" >
    var host = new UnoHosts("@Model.GameId");
    host.hubReady.done(function () {
        console.log("Hub is connected");
        //initiate the game.
        host.initGame(); 
    });

    function startGameOnClick(){
        host.startGame();
        $('#btnStartGame').addClass('disabled');
        $('#btnDealCards').removeClass('disabled');
        $('#btnReset').removeClass('disabled');
    }

    function dealCards() {
        host.dealCardsToPlayers();
        $('#btnDealCards').addClass('disabled');
    }

    function testCard() {
        var tknCard = host.hostHub.UnoGame.takeCardFromStock();
        console.log(tknCard);
    }

</script>